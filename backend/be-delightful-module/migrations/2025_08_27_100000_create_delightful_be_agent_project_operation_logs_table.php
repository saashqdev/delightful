<?php declare(strict_types=1); /** * Copyright (c) Be Delightful , Distributed under the MIT software license */ use Hyperf\Database\Migrations\Migration; use Hyperf\Database\Schema\Blueprint; use Hyperf\Database\Schema\Schema; return new class extends Migration { /** * Run the migrations. */ public function up(): void { Schema::create('delightful_super_agent_project_operation_logs', function (Blueprint $table) { $table->bigInteger('id')->primary()->comment('primary keyID'); $table->bigInteger('project_id')->index()->comment('project ID'); $table->string('user_id', 36)->index()->comment('user ID'); $table->string('organization_code', 64)->index()->comment('organization encoding'); $table->string('operation_action', 64)->comment('operationAction'); $table->string('resource_type', 32)->comment('resource type'); $table->string('resource_id', 128)->comment('resource ID'); $table->string('resource_name', 512)->comment('resource name'); $table->json('operation_details')->Nullable()->comment('operationDetails'); $table->string('operation_status', 32)->default('success')->comment('operationstatus'); $table->string('ip_address', 45)->Nullable()->comment('IP address'); $table->timestamp('created_at')->Nullable()->comment('creation time'); $table->timestamp('updated_at')->Nullable()->comment('update time'); // coreindex: Projectasinheart'sQuery $table->index(['project_id', 'created_at'], 'idx_project_created'); $table->index(['project_id', 'user_id', 'created_at'], 'idx_project_user_created'); $table->index(['project_id', 'operation_action', 'created_at'], 'idx_project_action_created'); }); } /** * Reverse the migrations. */ public function down(): void { Schema::dropIfExists('delightful_super_agent_project_operation_logs'); } }; 
