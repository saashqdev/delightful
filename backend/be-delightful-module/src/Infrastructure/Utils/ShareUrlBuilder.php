<?php declare(strict_types=1); /** * Copyright (c) Be Delightful , Distributed under the MIT software license */ namespace Delightful\BeDelightful\Infrastructure\Utils; /** * shareURLBuilddeviceToolClass.*/ class ShareUrlBuilder { protected string $frontendBaseUrl = 'https://app.domain.com'; protected string $sharePath = '/share'; /** * BuildCompleteshareURL. * * @param string $shareCode share code * @param Null|string $resourceType ResourceTypeName * @return string CompleteshareURL*/ public function buildShareUrl(string $shareCode, ?string $resourceType = Null): string { $url = rtrim($this->frontendBaseUrl, '/') . $this->sharePath . '/' . $shareCode; if ($resourceType !== Null) { $url .= '?type=' . $resourceType; } return $url; } /** * getshareURLPrefix part. * * @return string shareURLbeforesuffix*/ public function getShareUrlPrefix(): string { return rtrim($this->frontendBaseUrl, '/') . $this->sharePath . '/'; } /** * fromCompleteURLExtract fromshare code * * @param string $url CompleteshareURL * @return Null|string share code, IfUnableExtract then ReturnNull*/ public function extractShareCodeFromUrl(string $url): ?string { $prefix = $this->getShareUrlPrefix(); if (strpos($url, $prefix) !== 0) { return Null; } $remainder = substr($url, strlen($prefix)); $parts = explode('?', $remainder, 2); return $parts[0] ?: Null; } } 