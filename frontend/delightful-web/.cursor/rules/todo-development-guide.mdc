---
description: 
globs: 
alwaysApply: false
---
@rule Todo Development Guide
@description Guide to Todo component development and business logic implementation
@priority medium
@category business

# Todo Development Guide

## Component Structure

The Todo feature includes these core components:

1. **TodoList** - Displays the todo list
2. **TodoItem** - A single todo item
3. **TodoInput** - Input for adding new todos
4. **TodoFilter** - Filter for todos
5. **TodoStats** - Todo statistics

## Data Model

```typescript
interface Todo {
  id: string;        // Unique identifier
  content: string;   // Todo content
  completed: boolean; // Completed state
  createdAt: number; // Created timestamp
  updatedAt: number; // Updated timestamp
  priority?: 'low' | 'medium' | 'high'; // Priority
  tags?: string[];   // Tags
}
```

## State Management

Use Zustand to manage Todo state:

```typescript
import { create } from 'zustand';
import { immer } from 'zustand/middleware/immer';

interface TodoState {
  todos: Todo[];
  filter: 'all' | 'active' | 'completed';
  
  // Actions
  addTodo: (content: string) => void;
  toggleTodo: (id: string) => void;
  removeTodo: (id: string) => void;
  editTodo: (id: string, content: string) => void;
  setFilter: (filter: 'all' | 'active' | 'completed') => void;
  clearCompleted: () => void;
}

export const useTodoStore = create<TodoState>()(
  immer((set) => ({
    todos: [],
    filter: 'all',
    
    addTodo: (content) => set((state) => {
      state.todos.push({
        id: nanoid(),
        content,
        completed: false,
        createdAt: Date.now(),
        updatedAt: Date.now(),
      });
    }),
    
    // Other method implementations...
  }))
);
```

## Persistence

Persist Todo data using IndexedDB or localStorage:

```typescript
// Use zustand middleware for persistence
import { persist } from 'zustand/middleware';

export const useTodoStore = create<TodoState>()(
  persist(
    immer((set) => ({
      // State and actions...
    })),
    { name: 'todo-storage' }
  )
);
```

## Styling

Create styles using antd-style:

```typescript
import { createStyle } from 'antd-style';

const useStyles = createStyle(({ token }) => ({
  todoList: {
    width: '100%',
    maxWidth: 600,
    margin: '0 auto',
    padding: token.padding,
    backgroundColor: token.colorBgContainer,
    borderRadius: token.borderRadius,
    boxShadow: token.boxShadow,
  },
  todoItem: {
    display: 'flex',
    alignItems: 'center',
    padding: token.paddingSM,
    borderBottom: `1px solid ${token.colorBorderSecondary}`,
    '&:last-child': {
      borderBottom: 'none',
    },
  },
  completed: {
    textDecoration: 'line-through',
    color: token.colorTextDisabled,
  },
}));
```

## Testing Strategy

1. **Unit tests**: Test business logic in the store
2. **Component tests**: Test rendering and interactions
3. **Integration tests**: Test the full Todo workflow

## Performance Considerations

1. Use `useCallback` to optimize handlers
2. Use `React.memo` to optimize rendering
3. Use virtual lists for many todos to improve performance
