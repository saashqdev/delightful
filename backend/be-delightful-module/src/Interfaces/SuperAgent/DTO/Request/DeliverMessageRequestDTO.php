<?php declare(strict_types=1); /** * Copyright (c) Be Delightful , Distributed under the MIT software license */ namespace Delightful\BeDelightful\Interfaces\BeAgent\DTO\Request; use App\ErrorCode\GenericErrorCode; use App\Infrastructure\Core\Exception\ExceptionBuilder; use Hyperf\HttpServer\Contract\RequestInterface; class DeliverMessageRequestDTO { /** * ConstructFunction. * * @param array $metadata  element Data * @param array $payload Messagepayload*/ public function __construct( private array $metadata, private array $payload ) { } /** * fromHTTPRequestCreateDTO. * * @param RequestInterface $request HTTPRequest*/ public static function fromRequest(RequestInterface $request): self { $requestData = $request->all(); if (empty($requestData)) { ExceptionBuilder::throw(GenericErrorCode::ParameterMissing, 'message_required'); } // ValidateRequestcontainingmustwantmetadataAndpayloadfield if (! isset($requestData['metadata']) || ! isset($requestData['payload'])) { ExceptionBuilder::throw(GenericErrorCode::ParameterMissing, 'metadata_and_payload_required'); } return new self($requestData['metadata'], $requestData['payload']); } /** * get element Data.*/ public function getMetadata(): array { return $this->metadata; } /** * set element Data. * * @param array $metadata  element Data*/ public function setMetadata(array $metadata): self { $this->metadata = $metadata; return $this; } /** * getMessagepayload.*/ public function getPayload(): array { return $this->payload; } /** * setMessagepayload. * * @param array $payload Messagepayload*/ public function setPayload(array $payload): self { $this->payload = $payload; return $this; } } 