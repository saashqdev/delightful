<?php declare(strict_types=1); /** * Copyright (c) Be Delightful , Distributed under the MIT software license */ namespace Delightful\BeDelightful\Domain\BeAgent\Repository\Facade; use BeDelightful\BeDelightful\Domain\BeAgent\Entity\TaskEntity; use BeDelightful\BeDelightful\Domain\BeAgent\Entity\ValueObject\TaskStatus; use BeDelightful\BeDelightful\Domain\BeAgent\Repository\Model\TaskModel; interface TaskRepositoryInterface { /** * getTaskModelInstance. * * @return TaskModel TaskModelInstance*/ public function getModel(): TaskModel; /** * throughIDgetTask*/ public function getTaskById(int $id): ?TaskEntity; /** * throughTaskID(SandboxServiceReturntaskId)getTask*/ public function getTaskByTaskId(string $taskId): ?TaskEntity; /** * throughTopicIDgetTasklist. * @return array{list: TaskEntity[], total: int}*/ public function getTasksByTopicId(int $topicId, int $page, int $pageSize, array $conditions = []): array; /** * CreateTask*/ public function createTask(TaskEntity $taskEntity): TaskEntity; /** * UpdateTask*/ public function updateTask(TaskEntity $taskEntity): bool; /** * UpdateTaskStatus*/ public function updateTaskStatus(int $id, TaskStatus $status): bool; /** * UpdateTaskStatusAndErrorinformation.*/ public function updateTaskStatusAndErrMsg(int $id, TaskStatus $status, ?string $errMsg = Null): bool; /** * By/According toSandboxTaskIDUpdateTaskStatus*/ public function updateTaskStatusByTaskId(int $id, TaskStatus $status): bool; /** * By/According toSandboxTaskIDUpdateTaskStatusAndErrorinformation.*/ public function updateTaskStatusAndErrMsgByTaskId(int $id, TaskStatus $status, ?string $errMsg = Null): bool; /** * DeleteTask*/ public function deleteTask(int $id): bool; /** * BatchDeletespecifiedTopic next AllTask (softDelete). * * @param int $topicId TopicID * @return int  be DeleteTaskQuantity*/ public function deleteTasksByTopicId(int $topicId): int; /** * throughUser IDAndTaskID(SandboxServiceReturntaskId)getTask*/ public function getTaskByUserIdAndTaskId(string $userId, string $taskId): ?TaskEntity; /** * throughSandboxIDgetTask*/ public function getTaskBySandboxId(string $sandboxId): ?TaskEntity; /** * By/According toUser IDgetTasklist. * * @param string $userId User ID * @param array $conditions ConditionArray,  like  ['task_status' => 'running'] * @return array Tasklist*/ public function getTasksByUserId(string $userId, array $conditions = []): array; /** * UpdatelongTimeInRunStatusTaskForErrorStatus * * @param string $timeThreshold TimethresholdValue, Earlier than thisTimeRun in TaskConvert be MarkForError * @return int UpdateTaskQuantity*/ public function updateStaleRunningTasks(string $timeThreshold): int; /** * getspecifiedStatusTasklist. * * @param TaskStatus $status TaskStatus * @return array<TaskEntity> TaskEntitylist*/ public function getTasksByStatus(TaskStatus $status): array; /** * getRecentUpdated atexceedspecifiedTimeTasklist. * * @param string $timeThreshold TimethresholdValue, IfTaskUpdated atEarlier than thisTime, Will becontaininginResult in  * @param int $limit ReturnResultMaximumQuantity * @return array<TaskEntity> TaskEntitylist*/ public function getTasksExceedingUpdateTime(string $timeThreshold, int $limit = 100): array; /** * getspecifiedTopic next TaskQuantity.*/ public function getTaskCountByTopicId(int $topicId): int; /** * By/According toProject IDgetTasklist.*/ public function getTasksByProjectId(int $projectId, string $userId): array; public function updateTaskStatusBySandboxIds(array $sandboxIds, string $status, string $errMsg = ''): int; /** * StatisticsProject next TaskQuantity.*/ public function countTasksByProjectId(int $projectId): int; public function updateTaskByCondition(array $condition, array $data): bool; /** * By/According toTopicIDAndTaskIDlistgetTaskEntitylist. * * @param int $topicId TopicID * @param array $taskIds TaskIDlist * @return TaskEntity[] TaskEntityArray*/ public function getTasksByTopicIdAndTaskIds(int $topicId, array $taskIds): array; /** * BatchCreateTask * * @param TaskEntity[] $taskEntities TaskEntityArray * @return TaskEntity[] Created successfullyTaskEntityArray (containingGenerateID)*/ public function batchCreateTasks(array $taskEntities): array; } 