<?php declare(strict_types=1); /** * Copyright (c) Be Delightful , Distributed under the MIT software license */ namespace Delightful\BeDelightful\Interfaces\BeAgent\DTO\Request; use App\Infrastructure\Core\AbstractDTO; use Delightful\BeDelightful\Domain\BeAgent\Entity\ValueObject\WorkspaceArchiveStatus; use Hyperf\HttpServer\Contract\RequestInterface; class WorkspaceListRequestDTO extends AbstractDTO { /** * whetherArchive 0no 1 is .*/ public ?int $isArchived = Null; /** * Page number*/ public int $page = 1; /** * Per pageQuantity.*/ public int $pageSize = 10; /** * fromRequestCreate inDTO.*/ public static function fromRequest(RequestInterface $request): self { $dto = new self(); $dto->isArchived = $request->has('is_archived') ? (int) $request->input('is_archived') : WorkspaceArchiveStatus::NotArchived->value; $dto->page = (int) ($request->input('page', 1) ?: 1); $dto->pageSize = (int) ($request->input('page_size', 10) ?: 10); return $dto; } /** * BuildQueryCondition.*/ public function buildConditions(): array { $conditions = []; if ($this->isArchived !== Null) { $conditions['is_archived'] = $this->isArchived; } else { // defaultArchive $conditions['is_archived'] = WorkspaceArchiveStatus::NotArchived->value; } return $conditions; } } 
