<?php declare(strict_types=1); /** * Copyright (c) Be Delightful , Distributed under the MIT software license */ namespace Delightful\SuperMagic\Interfaces\SuperAgent\DTO\Response; /** * ParticipateProjectlistResponseDTO.*/ class ParticipatedProjectListResponseDTO { public function __construct( public readonly array $list, public readonly int $total ) { } /** * fromQueryResultCreateResponseDTO. * * @param array $result QueryResult (containing list And total) * @param array $workspaceNameMap WorkspaceNameMapping * @param array $projectIdsWithMember  have MemberProject IDArray*/ public static function fromResult( array $result, array $workspaceNameMap = [], array $projectIdsWithMember = [] ): self { $projects = $result['list'] ?? $result; $total = $result['total'] ?? count($projects); $list = array_map(function ($projectData) use ($workspaceNameMap, $projectIdsWithMember) { $workspaceName = $workspaceNameMap[$projectData['workspace_id']] ?? Null; $hasProjectMember = in_array($projectData['id'], $projectIdsWithMember); return ParticipatedProjectItemDTO::fromArray($projectData, $workspaceName, $hasProjectMember)->toArray(); }, $projects); return new self( list: $list, total: $total, ); } public function toArray(): array { return [ 'list' => $this->list, 'total' => $this->total, ]; } } 