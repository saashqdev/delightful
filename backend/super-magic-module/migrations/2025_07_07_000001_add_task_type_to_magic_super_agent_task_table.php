<?php declare(strict_types=1); /** * Copyright (c) Be Delightful , Distributed under the MIT software license */ use Hyperf\Database\Migrations\Migration; use Hyperf\Database\Schema\Blueprint; use Hyperf\Database\Schema\Schema; return new class extends Migration { /** * Run the migrations. */ public function up(): void { if (! Schema::hasTable('magic_super_agent_task')) { return; } Schema::table('magic_super_agent_task', function (Blueprint $table) { if (! Schema::hasColumn('magic_super_agent_task', 'task_type')) { $table->string('task_type', 50) ->default('agent') ->comment('Tasktype: agent-AgentTask, tool-ToolTask, custom-customTask') ->after('task_status'); } }); } /** * Reverse the migrations. */ public function down(): void { if (Schema::hasTable('magic_super_agent_task')) { Schema::table('magic_super_agent_task', function (Blueprint $table) { if (Schema::hasColumn('magic_super_agent_task', 'task_type')) { $table->dropColumn('task_type'); } }); } } }; 