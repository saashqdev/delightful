<?php declare(strict_types=1); /** * Copyright (c) Be Delightful , Distributed under the software license */ namespace Dtyq\SuperMagic\Interfaces\SuperAgent\DTO\Response; use App\Domain\Contact\Entity\MagicDepartmentEntity; use App\Domain\Contact\Entity\MagicUserEntity; use App\Infrastructure\Core\AbstractDTO; /** * CollaboratorMemberinformationDTO.*/ class CollaboratorMemberDTO extends AbstractDTO { /** * @var string MemberID (user_id or department_id)*/ protected string $id = ''; /** * @var string MemberName*/ protected string $name = ''; /** * @var string AvatarURL*/ protected string $avatarUrl = ''; /** * @var string MemberType User|Department*/ protected string $type = ''; /** * fromMagicUserEntityObjectCreateDTO.*/ public static function fromUserEntity(MagicUserEntity $userEntity): self { $dto = new self(); $dto->setId($userEntity->getUserId()); $dto->setName($userEntity->getNickname()); $dto->setAvatarUrl($userEntity->getAvatarUrl()); $dto->setType('User'); return $dto; } /** * fromMagicDepartmentEntityObjectCreateDTO.*/ public static function fromDepartmentEntity(MagicDepartmentEntity $departmentEntity): self { $dto = new self(); $dto->setId($departmentEntity->getDepartmentId() ?? ''); $dto->setName($departmentEntity->getName() ?? ''); $dto->setAvatarUrl(''); // DepartmentGeneralconstantNo/NoneAvatar $dto->setType('Department'); return $dto; } /** * Convert toArray.*/ public function toArray(): array { $result = [ 'name' => $this->name, 'avatar_url' => $this->avatarUrl, 'type' => $this->type, ]; // By/According toTypeaddPair should IDfield if ($this->type === 'User') { $result['user_id'] = $this->id; } elseif ($this->type === 'Department') { $result['department_id'] = $this->id; } return $result; } // Getters and Setters public function getId(): string { return $this->id; } public function setId(string $id): self { $this->id = $id; return $this; } public function getName(): string { return $this->name; } public function setName(string $name): self { $this->name = $name; return $this; } public function getAvatarUrl(): string { return $this->avatarUrl; } public function setAvatarUrl(string $avatarUrl): self { $this->avatarUrl = $avatarUrl; return $this; } public function getType(): string { return $this->type; } public function setType(string $type): self { $this->type = $type; return $this; } } 