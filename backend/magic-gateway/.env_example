# 通用配置
JWT_SECRET=your-secret-key-change-me
API_GATEWAY_VERSION=1.0.0
DEFAULT_API_URL=https://api.default-service.com
MAGIC_GATEWAY_API_KEY=your-gateway-api-key-here

# OpenAI 服务配置
OPENAI_API_KEY=sk-xxxx
OPENAI_API_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4

# Magic 服务配置
MAGIC_API_KEY=xxx
MAGIC_API_BASE_URL=https://api.magic.com/v1
MAGIC_MODEL=gpt-4o-global

# DeepSeek 服务配置
DEEPSEEK_API_KEY=xxxxx
DEEPSEEK_API_BASE_URL=https://api.deepseek.com/v1
DEEPSEEK_MODEL=deepseek-coder

# Azure OpenAI 服务配置
AZURE_OPENAI_EMBEDDING_API_KEY=xxxx
AZURE_OPENAI_EMBEDDING_ENDPOINT=https://example.openai.azure.com/
AZURE_OPENAI_EMBEDDING_MODEL=text-embedding-3-large
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=example-text-embedding
AZURE_OPENAI_EMBEDDING_API_VERSION=2023-05-15


# Gateway 配置
MAGIC_GATEWAY_API_KEY=xxxxx
MAGIC_GATEWAY_DEBUG=false
MAGIC_GATEWAY_HOST=http://host.docker.internal:8001
REDIS_PASSWORD=magic123456

MAGIC_GATEWAY_PORT=8000

# 目标URL白名单配置
# 格式: type:pattern@description|type:pattern@description
# 说明: 使用 @ 分隔描述（可选），以避免与URL中的 : 冲突
# 规则类型:
#   - exact: 精确URL匹配 (例如: exact:https://api.example.com/v1@示例API)
#   - domain: 域名及所有子域名 (例如: domain:example.com@允许所有子域名)
#   - prefix: URL前缀匹配 (例如: prefix:https://api.example.com/@允许所有路径)
#   - regex: 正则表达式匹配 (例如: regex:^https://api\.example\.com/v[0-9]+/@版本化API)
#
# 安全特性: 自动阻止内网IP (127.x, 10.x, 192.168.x等) 和非http(s)协议
#
# 示例1 - 允许特定域名:
# MAGIC_GATEWAY_ALLOWED_TARGET_URLS=domain:example.com@示例服务|domain:openai.com@OpenAI API
#
# 示例2 - 混合规则（推荐）:
# MAGIC_GATEWAY_ALLOWED_TARGET_URLS=domain:xxxx.cn@内部服务|prefix:https://api.github.com/@GitHub API|exact:https://api.openai.com/v1/chat/completions@OpenAI聊天
#
MAGIC_GATEWAY_ALLOWED_TARGET_URLS=

# 允许的内网IP配置（可选）
# 用于多节点部署场景，允许部分内网IP通过验证
# 格式: 支持多种分隔符（逗号、分号、换行符、空格）
# 支持单个IP和CIDR格式（IPv4和IPv6）
#
# 单节点部署示例:
# MAGIC_GATEWAY_ALLOWED_TARGET_IP=192.168.1.1,10.0.0.0/8
#
# 多节点部署示例（逗号分隔）:
# MAGIC_GATEWAY_ALLOWED_TARGET_IP=10.0.1.0/24,10.0.2.0/24,10.0.3.0/24,192.168.1.0/24
#
# 多节点部署示例（换行符分隔，适合配置文件）:
# MAGIC_GATEWAY_ALLOWED_TARGET_IP="10.0.1.0/24
# 10.0.2.0/24
# 10.0.3.0/24
# 192.168.1.0/24"
#
# 混合格式示例:
# MAGIC_GATEWAY_ALLOWED_TARGET_IP=192.168.1.1,10.0.0.0/8;172.16.0.0/12 192.168.2.0/24
#
# IPv6支持示例:
# MAGIC_GATEWAY_ALLOWED_TARGET_IP=10.0.0.0/8,2001:db8::/32,::1
#
# 注意: 如果不配置此变量，所有内网IP将被禁止访问
MAGIC_GATEWAY_ALLOWED_TARGET_IP=

# 特殊API配置（可选）
# 配置需要在请求体中自动替换API密钥的服务
# 格式: BASE_URL_ENV:API_KEY_ENV|BASE_URL_ENV2:API_KEY_ENV2
# MAGIC_GATEWAY_SPECIAL_API_KEYS=

# 环境变量白名单前缀配置
MAGIC_GATEWAY_ENV_WHITELIST_PREFIXES="OPENAI_,MAGIC_,DEEPSEEK_,TEXT_TO_IMAGE_,VOICE_UNDERSTANDING_"

# AI数据签名配置
# Base64编码的64字节Ed25519私钥，用于AI数据签名验证
AI_DATA_SIGNING_KEY=your_base64_encoded_ed25519_private_key_here

# 火山全栈可观测平台配置（可选）
# 当请求目标域名为火山可观测平台时，会自动将HTTP请求转换为gRPC请求
# 火山可观测平台 AppKey（必填，用于认证）
VOLCENGINE_APM_APPKEY=
# 火山可观测平台端点（可选，默认：apmplus-cn-beijing.ivolces.com:4317）
VOLCENGINE_APM_ENDPOINT=

# 如果使用火山可观测平台，需要将其域名添加到白名单，例如:
# MAGIC_GATEWAY_ALLOWED_TARGET_URLS=domain:volces.com@火山可观测平台|domain:ivolces.com@火山可观测平台(内网)

REDIS_HOST=magic-redis
REDIS_PORT=6379
REDIS_DB=6
REDIS_PASSWORD=
