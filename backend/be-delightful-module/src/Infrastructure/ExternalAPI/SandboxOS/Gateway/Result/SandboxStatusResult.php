<?php declare(strict_types=1); /** * Copyright (c) Be Delightful , Distributed under the MIT software license */ namespace Delightful\BeDelightful\Infrastructure\ExternalAPI\SandboxOS\Gateway\Result; use BeDelightful\BeDelightful\Infrastructure\ExternalAPI\SandboxOS\Gateway\Constant\SandboxStatus; /** * SandboxStatusResultClass * Specially handle single sandboxStatusQueryResult.*/ class SandboxStatusResult extends GatewayResult { private ?string $sandboxId = Null; private ?string $status = Null; /** * fromAPIResponseCreateSandboxStatusResult.*/ public static function fromApiResponse(array $response): self { $result = new self( $response['code'] ?? 2000, $response['message'] ?? 'Unknown error', $response['data'] ?? [] ); // parseSandboxStatusData $data = $response['data'] ?? []; if (isset($data['sandbox_id'])) { $result->sandboxId = $data['sandbox_id']; } if (isset($data['status'])) { $result->status = $data['status']; } return $result; } /** * getSandboxID.*/ public function getSandboxId(): ?string { return $this->sandboxId ?? $this->getDataValue('sandbox_id'); } /** * getSandboxStatus*/ public function getStatus(): ?string { return $this->status ?? $this->getDataValue('status'); } /** * setSandboxID.*/ public function setSandboxId(?string $sandboxId): self { $this->sandboxId = $sandboxId; return $this; } /** * setSandboxStatus*/ public function setStatus(?string $status): self { $this->status = $status; return $this; } /** * CheckSandboxwhetherRun in .*/ public function isRunning(): bool { $status = $this->getStatus(); return $status !== Null && SandboxStatus::isAvailable($status); } /** * CheckSandboxwhetherpendingStart.*/ public function isPending(): bool { return $this->getStatus() === SandboxStatus::PENDING; } /** * CheckSandboxwhether already exitoutput.*/ public function isExited(): bool { return $this->getStatus() === SandboxStatus::EXITED; } /** * CheckStatuswhetherValid.*/ public function hasValidStatus(): bool { $status = $this->getStatus(); return $status !== Null && SandboxStatus::isValidStatus($status); } } 