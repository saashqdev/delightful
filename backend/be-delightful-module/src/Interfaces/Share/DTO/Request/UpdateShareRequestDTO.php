<?php declare(strict_types=1); /** * Copyright (c) Be Delightful , Distributed under the MIT software license */ namespace Delightful\SuperMagic\Interfaces\Share\DTO\Request; use App\Infrastructure\Core\AbstractDTO; use Delightful\SuperMagic\Domain\Share\Constant\ShareAccessType; use Hyperf\HttpServer\Contract\RequestInterface; /** * UpdateshareRequestDTO.*/ class UpdateShareRequestDTO extends AbstractDTO { /** * share ID. */ public string $shareId = ''; /** * shareType.*/ public int $shareType = 0; /** * password*/ public ?string $password = Null; /** * ExpireDays.*/ public ?int $expireDays = Null; /** * Target IDlist.*/ public array $targetIds = []; /** * fromRequestCreate inDTO.*/ public static function fromRequest(RequestInterface $request): self { $dto = new self(); $dto->shareId = (string) $request->input('share_id', ''); $dto->shareType = (int) $request->input('share_type', 0); $dto->password = $request->has('password') ? (string) $request->input('password') : Null; $dto->expireDays = $request->has('expire_days') ? (int) $request->input('expire_days') : Null; $dto->targetIds = $request->input('target_ids', []); return $dto; } /** * getshare ID. */ public function getShareId(): string { return $this->shareId; } /** * getshareType.*/ public function getShareType(): ShareAccessType { return ShareAccessType::from($this->shareType); } /** * getpassword*/ public function getPassword(): ?string { return $this->password; } /** * getExpireDays.*/ public function getExpireDays(): ?int { return $this->expireDays; } /** * getTarget IDlist.*/ public function getTargetIds(): array { return $this->targetIds; } /** * BuildValidateRule.*/ public function rules(): array { return [ 'share_id' => 'required|string|max:64', 'share_type' => 'required|integer|min:1|max:4', 'password' => 'Nullable|string|min:4|max:32', 'expire_days' => 'Nullable|integer|min:1|max:365', 'target_ids' => 'Nullable|array', 'target_ids.*.type' => 'required_with:target_ids|integer|min:1|max:3', 'target_ids.*.id' => 'required_with:target_ids|string|max:64', ]; } /** * getValidateErrorMessage.*/ public function messages(): array { return [ 'share_id.required' => 'shareIDCannot be empty', 'share_type.required' => 'shareTypeCannot be empty', 'password.min' => 'passwordLengthtofewFor4bit', 'expire_days.min' => 'Validperiod most fewFor1day', 'expire_days.max' => 'Validperiod most multipleFor365day', ]; } /** * Property/AttributeName.*/ public function attributes(): array { return [ 'share_id' => 'shareID', 'share_type' => 'shareType', 'password' => 'password', 'expire_days' => 'ExpireDays', 'target_ids' => 'Target IDList', ]; } } 