<?php declare(strict_types=1); /** * Copyright (c) Be Delightful , Distributed under the MIT software license */ namespace Dtyq\SuperMagic\Infrastructure\ExternalAPI\SandboxOS\Agent\Response; /** * SandboxFileSaveResponseClass * parseSandbox /api/v1/files/edit InterfaceReturnData.*/ class SaveFilesResponse { private array $editSummary; private array $results; public function __construct(array $editSummary, array $results) { $this->editSummary = $editSummary; $this->results = $results; } /** * fromAPIResponseDataCreateResponseObject*/ public static function fromApiResponse(array $data): self { return new self( $data['edit_summary'] ?? [], $data['results'] ?? [] ); } /** * getEditSummary*/ public function getEditSummary(): array { return $this->editSummary; } /** * getdetailedResultlist.*/ public function getResults(): array { return $this->results; } /** * CheckwhetherAllFileallSuccess*/ public function isAllSuccess(): bool { return $this->editSummary['all_success'] ?? false; } /** * CheckwhetherAllFileallUploadSuccess*/ public function isAllUploaded(): bool { return $this->editSummary['all_uploaded'] ?? false; } /** * getSuccessQuantity.*/ public function getSuccessCount(): int { return $this->editSummary['success_count'] ?? 0; } /** * getFailedQuantity.*/ public function getFailedCount(): int { return $this->editSummary['failed_count'] ?? 0; } /** * getTotal amount .*/ public function getTotalCount(): int { return $this->editSummary['total_count'] ?? 0; } /** * getUploadSuccessQuantity.*/ public function getUploadSuccessCount(): int { return $this->editSummary['upload_success_count'] ?? 0; } /** * Convert to array format (Keep with originalInterfaceCompatible).*/ public function toArray(): array { return [ 'edit_summary' => $this->editSummary, 'results' => $this->results, ]; } /** * getFailedFilelist.*/ public function getFailedFiles(): array { return array_filter($this->results, function ($result) { return ! ($result['success'] ?? true); }); } /** * getSuccessFilelist.*/ public function getSuccessFiles(): array { return array_filter($this->results, function ($result) { return $result['success'] ?? true; }); } } 