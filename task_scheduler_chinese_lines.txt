backend\task-scheduler\.php-cs-fixer.php:16: // 并发 cs-fix
backend\task-scheduler\README.md:3: ## 安装
backend\task-scheduler\README.md:9: ## 使用方式请见
backend\task-scheduler\README.md:14: ## 说明
backend\task-scheduler\README.md:15: > 仅支持分钟级调用
backend\task-scheduler\README.md:17: 调度方式
backend\task-scheduler\README.md:18: 1. 定时调度
backend\task-scheduler\README.md:19: 2. 指定调度
backend\task-scheduler\README.md:21: 创建调度任务
backend\task-scheduler\README.md:22: 1. 定时调度需要有个定时器去生成未来 n 小时内的需要执行的任务数据
backend\task-scheduler\README.md:23: 2. 根据任务时间生成调度任务
backend\task-scheduler\README.md:25: 执行任务
backend\task-scheduler\README.md:26: 1. 执行已到时间的任务，改变状态，如果有误则执行报错事件
backend\task-scheduler\README.md:27: 2. 调度结束后，记录到归档表
backend\task-scheduler\README.md:29: 后台执行
backend\task-scheduler\README.md:30: 1. 每天检测超过 n 天已完成的调度任务，删除。防止调度表过大
backend\task-scheduler\README.md:31: 2. 每分钟检测未来 n 天内需要执行的任务，生成调度任务
backend\task-scheduler\README.md:32: 3. 每分钟检测已到时间的任务，执行
backend\task-scheduler\README.md:34: 数据库
backend\task-scheduler\README.md:35: 1. 任务调度表(task_scheduler) 用于具体执行的任务记录
backend\task-scheduler\README.md:36: 2. 任务归档表(task_scheduler_log) 用于保存已完成的任务记录，仅做归档，方便以后回档查看历史记录
backend\task-scheduler\README.md:37: 3. 定时任务表(task_scheduler_crontab) 用于保存定时任务规则
backend\task-scheduler\README.md:39: ## 记得创建表结构
backend\task-scheduler\README.md:49: external_id     varchar(64)             not null comment '业务 id',
backend\task-scheduler\README.md:50: name            varchar(64)             not null comment '名称',
backend\task-scheduler\README.md:51: expect_time     datetime                not null comment '预期执行时间',
backend\task-scheduler\README.md:52: actual_time     datetime                null comment '实际执行时间',
backend\task-scheduler\README.md:53: type            tinyint      default 2  not null comment '调度类型：1 定时调度，2 指定调度',
backend\task-scheduler\README.md:54: cost_time       int          default 0  not null comment '耗时 毫秒',
backend\task-scheduler\README.md:55: retry_times     int          default 0  not null comment '剩余重试次数',
backend\task-scheduler\README.md:56: status          tinyint      default 0  not null comment '状态',
backend\task-scheduler\README.md:57: callback_method json                    not null comment '回调方法',
backend\task-scheduler\README.md:58: callback_params json                    not null comment '回调参数',
backend\task-scheduler\README.md:59: remark          varchar(255) default '' not null comment '备注',
backend\task-scheduler\README.md:60: creator         varchar(64)  default '' not null comment '创建人',
backend\task-scheduler\README.md:61: created_at      datetime                not null comment '创建时间'
backend\task-scheduler\README.md:75: name            varchar(64)             not null comment '名称',
backend\task-scheduler\README.md:76: crontab         varchar(64)             not null comment 'crontab表达式',
backend\task-scheduler\README.md:77: last_gen_time   datetime                null comment '最后生成时间',
backend\task-scheduler\README.md:78: enabled         tinyint(1)   default 1  not null comment '是否启用',
backend\task-scheduler\README.md:79: retry_times     int          default 0  not null comment '总重试次数',
backend\task-scheduler\README.md:80: callback_method json                    not null comment '回调方法',
backend\task-scheduler\README.md:81: callback_params json                    not null comment '回调参数',
backend\task-scheduler\README.md:82: remark          varchar(255) default '' not null comment '备注',
backend\task-scheduler\README.md:83: creator         varchar(64)  default '' not null comment '创建人',
backend\task-scheduler\README.md:84: created_at      datetime                not null comment '创建时间'
backend\task-scheduler\README.md:95: task_id         bigint unsigned         not null comment '任务ID',
backend\task-scheduler\README.md:96: external_id     varchar(64)             not null comment '业务标识',
backend\task-scheduler\README.md:97: name            varchar(64)             not null comment '名称',
backend\task-scheduler\README.md:98: expect_time     datetime                not null comment '预期执行时间',
backend\task-scheduler\README.md:99: actual_time     datetime                null comment '实际执行时间',
backend\task-scheduler\README.md:100: type            tinyint      default 2  not null comment '类型',
backend\task-scheduler\README.md:101: cost_time       int          default 0  not null comment '耗时',
backend\task-scheduler\README.md:102: status          tinyint      default 0  not null comment '状态',
backend\task-scheduler\README.md:103: callback_method json                    not null comment '回调方法',
backend\task-scheduler\README.md:104: callback_params json                    not null comment '回调参数',
backend\task-scheduler\README.md:105: remark          varchar(255) default '' not null comment '备注',
backend\task-scheduler\README.md:106: creator         varchar(64)  default '' not null comment '创建人',
backend\task-scheduler\README.md:107: created_at      datetime                not null comment '创建时间',
backend\task-scheduler\README.md:108: result          json                    null comment '结果'
backend\task-scheduler\publish\task_scheduler.php:8: // 定时生成未来 n 天的数据
backend\task-scheduler\publish\task_scheduler.php:10: // 超过 n 天的数据会被清理
backend\task-scheduler\publish\task_scheduler.php:13: // 开启环境隔离
backend\task-scheduler\publish\task_scheduler.php:16: // 同时执行的定时任务数量，协程数量控制
backend\task-scheduler\publish\task_scheduler.php:19: // 锁超时时间
backend\task-scheduler\src\ConfigProvider.php:36: 'source' => __DIR__ . '/../publish/migrations/2024_08_28_110155_create_task_scheduler.php',  // 对应的配置文件路径
backend\task-scheduler\src\ConfigProvider.php:37: 'destination' => BASE_PATH . '/migrations/2024_08_28_110155_create_task_scheduler.php', // 复制为这个路径下的该文件
backend\task-scheduler\src\ConfigProvider.php:42: 'source' => __DIR__ . '/../publish/migrations/2024_08_28_110158_create_task_scheduler_log.php',  // 对应的配置文件路径
backend\task-scheduler\src\ConfigProvider.php:43: 'destination' => BASE_PATH . '/migrations/2024_08_28_110158_create_task_scheduler_log.php', // 复制为这个路径下的该文件
backend\task-scheduler\src\ConfigProvider.php:48: 'source' => __DIR__ . '/../publish/migrations/2024_08_28_110202_create_task_scheduler_crontab.php',  // 对应的配置文件路径
backend\task-scheduler\src\ConfigProvider.php:49: 'destination' => BASE_PATH . '/migrations/2024_08_28_110202_create_task_scheduler_crontab.php', // 复制为这个路径下的该文件
backend\task-scheduler\src\ConfigProvider.php:54: 'source' => __DIR__ . '/../publish/migrations/2024_10_22_101130_task_scheduler_add_environment.php',  // 对应的配置文件路径
backend\task-scheduler\src\ConfigProvider.php:55: 'destination' => BASE_PATH . '/migrations/2024_10_22_101130_task_scheduler_add_environment.php', // 复制为这个路径下的该文件
backend\task-scheduler\src\Crontab\TaskSchedulerClearCrontab.php:22: #[Crontab(rule: '0 2 * * *', name: 'TaskSchedulerClearCrontab', singleton: true, mutexExpires: 600, onOneServer: true, callback: 'execute', memo: '清理超过 n 天的调度数据')]
backend\task-scheduler\src\Crontab\TaskSchedulerClearCrontab.php:36: // 清理超过 n 天的调度数据
backend\task-scheduler\src\Crontab\TaskSchedulerClearCrontab.php:42: // 1 页 1 页慢慢删除
backend\task-scheduler\src\Crontab\TaskSchedulerClearCrontab.php:59: $this->logger->info('清理调度数据', [
backend\task-scheduler\src\Crontab\TaskSchedulerCreateCrontab.php:21: #[Crontab(rule: '* * * * *', name: 'TaskSchedulerCreateCrontab', singleton: true, mutexExpires: 90, onOneServer: true, callback: 'execute', memo: '创建未来 n 天的调度数据')]
backend\task-scheduler\src\Crontab\TaskSchedulerCreateCrontab.php:37: // 获取 lastTime 超过的数据
backend\task-scheduler\src\Crontab\TaskSchedulerCreateCrontab.php:53: $this->logger->notice('创建调度失败', [
backend\task-scheduler\src\Crontab\TaskSchedulerExecuteCrontab.php:25: #[Crontab(rule: '* * * * *', name: 'TaskSchedulerExecuteCrontab', singleton: true, mutexExpires: 90, onOneServer: true, callback: 'execute', memo: '执行调度')]
backend\task-scheduler\src\Crontab\TaskSchedulerExecuteCrontab.php:47: // 获取已经超过了调度时间，还未开始的任务进行执行
backend\task-scheduler\src\Crontab\TaskSchedulerExecuteCrontab.php:85: // 实时查询最新数据
backend\task-scheduler\src\Crontab\TaskSchedulerExecuteCrontab.php:92: $this->logger->notice('执行调度失败', [
backend\task-scheduler\src\Entity\TaskScheduler.php:26: * 业务id.
backend\task-scheduler\src\Entity\TaskScheduler.php:27: * 一般用于业务识别.
backend\task-scheduler\src\Entity\TaskScheduler.php:28: * 可作为来源标识.
backend\task-scheduler\src\Entity\TaskScheduler.php:33: * 调度名称.
backend\task-scheduler\src\Entity\TaskScheduler.php:38: * 预期调度时间.
backend\task-scheduler\src\Entity\TaskScheduler.php:39: * 分钟级别.
backend\task-scheduler\src\Entity\TaskScheduler.php:44: * 调度类型：1 定时调度，2 指定调度.
backend\task-scheduler\src\Entity\TaskScheduler.php:49: * 剩余重试次数.
backend\task-scheduler\src\Entity\TaskScheduler.php:54: * 实际调度时间.
backend\task-scheduler\src\Entity\TaskScheduler.php:59: * 调度耗时.
backend\task-scheduler\src\Entity\TaskScheduler.php:64: * 调度状态
backend\task-scheduler\src\Entity\TaskScheduler.php:69: * 调度方法.
backend\task-scheduler\src\Entity\TaskScheduler.php:70: * [Class, Method] 的格式.
backend\task-scheduler\src\Entity\TaskScheduler.php:75: * 调度方法参数.
backend\task-scheduler\src\Entity\TaskScheduler.php:80: * 备注.
backend\task-scheduler\src\Entity\TaskScheduler.php:85: * 创建人.
backend\task-scheduler\src\Entity\TaskScheduler.php:86: * 可不填，看业务是否需要.
backend\task-scheduler\src\Entity\TaskScheduler.php:91: * 创建时间.
backend\task-scheduler\src\Entity\TaskScheduler.php:106: throw new TaskSchedulerParamsSchedulerException('业务标识 不能为空');
backend\task-scheduler\src\Entity\TaskScheduler.php:109: throw new TaskSchedulerParamsSchedulerException('调度名称 不能为空');
backend\task-scheduler\src\Entity\TaskScheduler.php:112: throw new TaskSchedulerParamsSchedulerException('预期调度时间 不能为空');
backend\task-scheduler\src\Entity\TaskScheduler.php:130: throw new TaskSchedulerParamsSchedulerException('只有待执行或重试状态的调度才能执行');
backend\task-scheduler\src\Entity\TaskScheduler.php:137: throw new TaskSchedulerParamsSchedulerException('只有待执行或重试状态的调度才能取消');
backend\task-scheduler\src\Entity\TaskScheduler.php:356: throw new TaskSchedulerParamsSchedulerException('调度方法 不能为空');
backend\task-scheduler\src\Entity\TaskScheduler.php:359: throw new TaskSchedulerParamsSchedulerException('调度方法格式错误');
backend\task-scheduler\src\Entity\TaskScheduler.php:363: throw new TaskSchedulerParamsSchedulerException('调度方法格式错误');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:22: * 业务id.
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:23: * 一般用于业务识别.
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:24: * 可作为来源标识.
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:58: throw new TaskSchedulerParamsSchedulerException('定时名称 不能为空');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:61: throw new TaskSchedulerParamsSchedulerException('业务标识 不能为空');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:64: throw new TaskSchedulerParamsSchedulerException('定时规则 不能为空');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:67: throw new TaskSchedulerParamsSchedulerException('定时规则 格式错误');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:73: throw new TaskSchedulerParamsSchedulerException('是否启用 不能为空');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:84: throw new TaskSchedulerParamsSchedulerException('结束时间 不能小于当前时间');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:99: throw new TaskSchedulerParamsSchedulerException('定时名称 不能为空');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:102: throw new TaskSchedulerParamsSchedulerException('业务标识 不能为空');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:105: throw new TaskSchedulerParamsSchedulerException('定时规则 不能为空');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:108: throw new TaskSchedulerParamsSchedulerException('定时规则 格式错误');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:114: throw new TaskSchedulerParamsSchedulerException('是否启用 不能为空');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:125: throw new TaskSchedulerParamsSchedulerException('结束时间 不能小于当前时间');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:137: throw new TaskSchedulerParamsSchedulerException('定时任务ID 不能为空');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:140: throw new TaskSchedulerParamsSchedulerException('定时规则 不能为空');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:143: throw new TaskSchedulerParamsSchedulerException('定时规则 格式错误');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:149: throw new TaskSchedulerParamsSchedulerException('未启用的定时任务不能生成调度任务');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:155: * 获取指定日期内的数据.
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:169: // 如果超过了结束时间，就不需要了
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:174: // 更新上次时间
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:361: throw new TaskSchedulerParamsSchedulerException('调度方法 不能为空');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:364: throw new TaskSchedulerParamsSchedulerException('调度方法格式错误');
backend\task-scheduler\src\Entity\TaskSchedulerCrontab.php:368: throw new TaskSchedulerParamsSchedulerException('调度方法格式错误');
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:25: * 调度标识.
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:26: * 一般用于业务识别.
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:27: * 可作为来源标识.
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:32: * 调度名称.
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:37: * 预期调度时间.
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:38: * 分钟级别.
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:43: * 实际调度时间.
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:48: * 调度耗时.
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:53: * 调度状态
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:58: * 调度类型.
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:63: * 调度方法.
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:64: * [Class, Method] 的格式.
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:69: * 调度方法参数.
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:74: * 备注.
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:79: * 创建人.
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:80: * 可不填，看业务是否需要.
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:85: * 创建时间.
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:90: * 调度执行结果.
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:100: throw new TaskSchedulerParamsSchedulerException('任务ID 不能为空');
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:103: throw new TaskSchedulerParamsSchedulerException('业务标识 不能为空');
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:106: throw new TaskSchedulerParamsSchedulerException('调度名称 不能为空');
backend\task-scheduler\src\Entity\TaskSchedulerLog.php:109: throw new TaskSchedulerParamsSchedulerException('预期调度时间 不能为空');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:23: // 定时类型
backend\task-scheduler\src\Service\TaskConfigDomainService.php:25: // 具体日期
backend\task-scheduler\src\Service\TaskConfigDomainService.php:27: // 具体时间
backend\task-scheduler\src\Service\TaskConfigDomainService.php:29: // 自定义周期的时候，间隔单位 day / week / month / year
backend\task-scheduler\src\Service\TaskConfigDomainService.php:31: // 自定义周期的时候，间隔频率，如每天，每周，每月，每年
backend\task-scheduler\src\Service\TaskConfigDomainService.php:33: // unit=week时为[1~7]，unit=month时为[1~31]
backend\task-scheduler\src\Service\TaskConfigDomainService.php:35: // 结束日期，该日期后不生成数据
backend\task-scheduler\src\Service\TaskConfigDomainService.php:61: // 传入参数判断是否需要不重复的定时任务
backend\task-scheduler\src\Service\TaskConfigDomainService.php:68: throw new InvalidArgumentException('当前类型无需生成定时规则');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:80: // 0-6 表示周一到周日，所以得兼容一下 crontab 的规则 0 表示周日
backend\task-scheduler\src\Service\TaskConfigDomainService.php:116: throw new InvalidArgumentException('生成定时规则失败');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:135: throw new TaskSchedulerParamsSchedulerException('间隔单位未找到');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:138: // 根据截止时间 和当前时间 得出间隔多少天
backend\task-scheduler\src\Service\TaskConfigDomainService.php:142: // 如果单位是年，那么month 不能为空
backend\task-scheduler\src\Service\TaskConfigDomainService.php:144: throw new TaskSchedulerParamsSchedulerException('自定义重复选择年份时，月份不能为空');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:147: // 如果单位是年
backend\task-scheduler\src\Service\TaskConfigDomainService.php:149: // 未来10年
backend\task-scheduler\src\Service\TaskConfigDomainService.php:152: // 未来两年
backend\task-scheduler\src\Service\TaskConfigDomainService.php:157: // 最多不能超过5年
backend\task-scheduler\src\Service\TaskConfigDomainService.php:159: throw new TaskSchedulerParamsSchedulerException('间隔时间不能超过5年');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:162: //     throw new TaskSchedulerParamsSchedulerException('每日间隔时间不能超过截止时间');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:177: //     throw new TaskSchedulerParamsSchedulerException('每周间隔时间不能超过或等于截止时间');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:188: //     throw new TaskSchedulerParamsSchedulerException('每月间隔时间不能超过或等于截止时间');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:197: //     throw new TaskSchedulerParamsSchedulerException('每年间隔时间不能超过或等于截止时间');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:260: // 获取当月一共有多少天
backend\task-scheduler\src\Service\TaskConfigDomainService.php:302: // 如果期望时间大于截止时间，则删除
backend\task-scheduler\src\Service\TaskConfigDomainService.php:310: throw new TaskSchedulerParamsSchedulerException('未能生成任何定时任务,请检查配置');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:322: throw new InvalidArgumentException('自定义周期间隔单位 不能为空');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:325: throw new InvalidArgumentException('自定义周期间隔频率 不能为空');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:329: throw new InvalidArgumentException('自定义周期间隔频率 只能在1~30之间');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:331: // 只有是周或者月的时候，才能有 values
backend\task-scheduler\src\Service\TaskConfigDomainService.php:334: throw new InvalidArgumentException('自定义周期间隔频率 不能为空');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:339: throw new InvalidArgumentException('自定义周期间隔频率 只能是整数');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:342: throw new InvalidArgumentException('自定义周期间隔频率 只能在0~6之间');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:349: throw new InvalidArgumentException('自定义周期间隔频率 只能是整数');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:352: throw new InvalidArgumentException('自定义周期间隔频率 只能在1~31之间');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:365: throw new InvalidArgumentException('日期 不能为空');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:368: throw new InvalidArgumentException('时间 不能为空');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:371: // 每周的时候，day 表示周几 0-6  0是周一
backend\task-scheduler\src\Service\TaskConfigDomainService.php:374: throw new InvalidArgumentException('日期 只能在0~6之间');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:379: // 每月的时候，day 表示第几天
backend\task-scheduler\src\Service\TaskConfigDomainService.php:382: throw new InvalidArgumentException('日期 只能在1~31之间');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:387: // 不重复、每年、每月的时候，day 表示日期
backend\task-scheduler\src\Service\TaskConfigDomainService.php:390: throw new InvalidArgumentException('日期 格式错误');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:397: // 时间只能是未来的，
backend\task-scheduler\src\Service\TaskConfigDomainService.php:398: // TODO 有bug， 当天也会认为是未来的
backend\task-scheduler\src\Service\TaskConfigDomainService.php:401: //     ExceptionBuilder::throw(FlowErrorCode::FlowNodeValidateFailed, '日期 不能是过去的');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:410: throw new InvalidArgumentException('距离当前时间过于接近,请调整时间');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:418: throw new InvalidArgumentException('截止日期 格式错误');
backend\task-scheduler\src\Service\TaskConfigDomainService.php:425: // 如果是自定义重复，并且没有设置截止时间，则默认两年
backend\task-scheduler\src\Service\TaskConfigDomainService.php:432: // 截止时间只能是未来的
backend\task-scheduler\src\Service\TaskConfigDomainService.php:434: throw new InvalidArgumentException('截止日期 距离当前时间过于接近,请调整时间');
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:55: // 转TaskSchedulerCrontab实体
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:60: * 创建指定调度.
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:69: * 创建定时调度.
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:78: * 批量创建定时调度.
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:94: * 修改定时调度.
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:102: // 清理scheduler 调度 和 crontab 规则
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:106: // 清理 scheduler 调度
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:108: // 清理 crontab 规则
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:112: // 清理scheduler 调度
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:116: // 清理 scheduler 调度
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:121: * 通过定时规则创建指定调度.
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:127: //     throw new TaskSchedulerParamsSchedulerException('仅支持1-3天的周期提前生成');
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:131: // 获取未来几天和截止日期的最小值
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:141: // 如果已经进入截止时间，那么关闭该 crontab
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:150: * 查询调度任务.
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:159: * 查询定时调度任务.
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:168: * 执行调度任务.
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:186: // 重试次数用完，标记为失败
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:202: * 取消调度任务.
backend\task-scheduler\src\Service\TaskSchedulerDomainService.php:238: * 归档.
backend\task-scheduler\src\Util\Locker.php:25: * 获取互斥锁
backend\task-scheduler\src\Util\Locker.php:26: * @param string $name 锁的名称，指定锁的名称
backend\task-scheduler\src\Util\Locker.php:27: * @param string $owner 锁的所有者，指定锁的唯一标识，避免错误释放
backend\task-scheduler\src\Util\Locker.php:28: * @param int $expire 过期时间，秒
backend\task-scheduler\src\Repository\Persistence\TaskSchedulerRepository.php:24: // 如果是创建过的，就不创建了
backend\task-scheduler\src\Repository\Persistence\TaskSchedulerRepository.php:44: // 批量写入
backend\task-scheduler\src\Repository\Persistence\TaskSchedulerRepository.php:52: // 拆分批量写入,每次写入500条
backend\task-scheduler\src\Entity\Query\Page.php:29: * 根据页码及页数计算分片数据起始位置.
backend\task-scheduler\src\Entity\Query\Page.php:37: * 根据页码及页数计算分片数据结束位置.
backend\task-scheduler\src\Entity\ValueObject\IntervalUnit.php:13: * 间隔执行单位:天.
backend\task-scheduler\src\Entity\ValueObject\IntervalUnit.php:18: * 间隔执行单位:周.
backend\task-scheduler\src\Entity\ValueObject\IntervalUnit.php:23: * 间隔执行单位:月.
backend\task-scheduler\src\Entity\ValueObject\IntervalUnit.php:28: * 间隔执行单位:年.
backend\task-scheduler\src\Entity\ValueObject\TaskType.php:13: * 不重复.
backend\task-scheduler\src\Entity\ValueObject\TaskType.php:18: * 每天重复.
backend\task-scheduler\src\Entity\ValueObject\TaskType.php:23: * 每周重复.
backend\task-scheduler\src\Entity\ValueObject\TaskType.php:28: * 每月重复.
backend\task-scheduler\src\Entity\ValueObject\TaskType.php:33: * 每年重复.
backend\task-scheduler\src\Entity\ValueObject\TaskType.php:38: * 每个工作日重复.
backend\task-scheduler\src\Entity\ValueObject\TaskType.php:51: * 自定义重复.
backend\task-scheduler\publish\migrations\2024_08_28_110155_create_task_scheduler.php:22: $table->string('external_id', 64)->comment('业务 id')->index();
backend\task-scheduler\publish\migrations\2024_08_28_110155_create_task_scheduler.php:23: $table->string('name', 64)->comment('名称');
backend\task-scheduler\publish\migrations\2024_08_28_110155_create_task_scheduler.php:24: $table->dateTimeTz('expect_time')->comment('预期执行时间');
backend\task-scheduler\publish\migrations\2024_08_28_110155_create_task_scheduler.php:25: $table->dateTimeTz('actual_time')->nullable()->comment('实际执行时间');
backend\task-scheduler\publish\migrations\2024_08_28_110155_create_task_scheduler.php:26: $table->tinyInteger('type')->default(2)->comment('类型');
backend\task-scheduler\publish\migrations\2024_08_28_110155_create_task_scheduler.php:27: $table->integer('cost_time')->default(0)->comment('耗时 毫秒');
backend\task-scheduler\publish\migrations\2024_08_28_110155_create_task_scheduler.php:28: $table->integer('retry_times')->default(0)->comment('剩余重试次数');
backend\task-scheduler\publish\migrations\2024_08_28_110155_create_task_scheduler.php:29: $table->tinyInteger('status')->default(0)->comment('状态');
backend\task-scheduler\publish\migrations\2024_08_28_110155_create_task_scheduler.php:30: $table->json('callback_method')->comment('回调方法');
backend\task-scheduler\publish\migrations\2024_08_28_110155_create_task_scheduler.php:31: $table->json('callback_params')->comment('回调参数');
backend\task-scheduler\publish\migrations\2024_08_28_110155_create_task_scheduler.php:32: $table->string('remark', 255)->default('')->comment('备注');
backend\task-scheduler\publish\migrations\2024_08_28_110155_create_task_scheduler.php:33: $table->string('creator', 64)->default('')->comment('创建人');
backend\task-scheduler\publish\migrations\2024_08_28_110155_create_task_scheduler.php:34: $table->dateTimeTz('created_at')->comment('创建时间');
backend\task-scheduler\publish\migrations\2024_08_28_110158_create_task_scheduler_log.php:22: $table->bigInteger('task_id')->unsigned()->comment('任务ID')->index();
backend\task-scheduler\publish\migrations\2024_08_28_110158_create_task_scheduler_log.php:23: $table->string('external_id', 64)->comment('业务标识')->index();
backend\task-scheduler\publish\migrations\2024_08_28_110158_create_task_scheduler_log.php:24: $table->string('name', 64)->comment('名称');
backend\task-scheduler\publish\migrations\2024_08_28_110158_create_task_scheduler_log.php:25: $table->dateTime('expect_time')->comment('预期执行时间');
backend\task-scheduler\publish\migrations\2024_08_28_110158_create_task_scheduler_log.php:26: $table->dateTime('actual_time')->nullable()->comment('实际执行时间');
backend\task-scheduler\publish\migrations\2024_08_28_110158_create_task_scheduler_log.php:27: $table->tinyInteger('type')->default(2)->comment('类型');
backend\task-scheduler\publish\migrations\2024_08_28_110158_create_task_scheduler_log.php:28: $table->integer('cost_time')->default(0)->comment('耗时');
backend\task-scheduler\publish\migrations\2024_08_28_110158_create_task_scheduler_log.php:29: $table->tinyInteger('status')->default(0)->comment('状态');
backend\task-scheduler\publish\migrations\2024_08_28_110158_create_task_scheduler_log.php:30: $table->json('callback_method')->comment('回调方法');
backend\task-scheduler\publish\migrations\2024_08_28_110158_create_task_scheduler_log.php:31: $table->json('callback_params')->comment('回调参数');
backend\task-scheduler\publish\migrations\2024_08_28_110158_create_task_scheduler_log.php:32: $table->string('remark', 255)->default('')->comment('备注');
backend\task-scheduler\publish\migrations\2024_08_28_110158_create_task_scheduler_log.php:33: $table->string('creator', 64)->default('')->comment('创建人');
backend\task-scheduler\publish\migrations\2024_08_28_110158_create_task_scheduler_log.php:34: $table->dateTime('created_at')->comment('创建时间');
backend\task-scheduler\publish\migrations\2024_08_28_110158_create_task_scheduler_log.php:35: $table->json('result')->nullable()->comment('结果');
backend\task-scheduler\publish\migrations\2024_08_28_110202_create_task_scheduler_crontab.php:22: $table->string('external_id', 64)->comment('业务 id')->index();
backend\task-scheduler\publish\migrations\2024_08_28_110202_create_task_scheduler_crontab.php:23: $table->string('name', 64)->comment('名称');
backend\task-scheduler\publish\migrations\2024_08_28_110202_create_task_scheduler_crontab.php:24: $table->string('crontab', 64)->comment('crontab表达式');
backend\task-scheduler\publish\migrations\2024_08_28_110202_create_task_scheduler_crontab.php:25: $table->dateTime('last_gen_time')->nullable()->comment('最后生成时间');
backend\task-scheduler\publish\migrations\2024_08_28_110202_create_task_scheduler_crontab.php:26: $table->boolean('enabled')->default(true)->comment('是否启用');
backend\task-scheduler\publish\migrations\2024_08_28_110202_create_task_scheduler_crontab.php:27: $table->integer('retry_times')->default(0)->comment('总重试次数');
backend\task-scheduler\publish\migrations\2024_08_28_110202_create_task_scheduler_crontab.php:28: $table->json('callback_method')->comment('回调方法');
backend\task-scheduler\publish\migrations\2024_08_28_110202_create_task_scheduler_crontab.php:29: $table->json('callback_params')->comment('回调参数');
backend\task-scheduler\publish\migrations\2024_08_28_110202_create_task_scheduler_crontab.php:30: $table->string('remark', 255)->default('')->comment('备注');
backend\task-scheduler\publish\migrations\2024_08_28_110202_create_task_scheduler_crontab.php:31: $table->dateTime('deadline')->nullable()->comment('结束时间');
backend\task-scheduler\publish\migrations\2024_08_28_110202_create_task_scheduler_crontab.php:32: $table->string('creator', 64)->default('')->comment('创建人');
backend\task-scheduler\publish\migrations\2024_08_28_110202_create_task_scheduler_crontab.php:33: $table->dateTime('created_at')->comment('创建时间');
backend\task-scheduler\publish\migrations\2024_10_22_101130_task_scheduler_add_environment.php:21: $table->string('environment', 64)->default('')->comment('环境');
backend\task-scheduler\publish\migrations\2024_10_22_101130_task_scheduler_add_environment.php:27: $table->string('environment', 64)->default('')->comment('环境');
backend\task-scheduler\publish\migrations\2024_10_22_101130_task_scheduler_add_environment.php:33: $table->string('environment', 64)->default('')->comment('环境');
backend\task-scheduler\publish\migrations\2025_02_14_101130_task_scheduler_crontab_add_filter_id.php:21: $table->string('filter_id', 255)->default('')->comment('过滤数据的id');