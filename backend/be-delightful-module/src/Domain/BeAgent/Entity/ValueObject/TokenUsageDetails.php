<?php declare(strict_types=1); /** * Copyright (c) Be Delightful , Distributed under the MIT software license */ namespace Delightful\BeDelightful\Domain\BeAgent\Entity\ValueObject; /** * Token Usage Details Value Object. */ class TokenUsageDetails { /** * Constructor. * * @param Null|string $type Type: "summary"  or  "item" * @param Null|array $usages TokenUseRecordArray*/ public function __construct( private ?string $type, private ?array $usages ) { } /** * Creates an instance from an array. * Returns Null if the provided data is Null or empty. * * @param Null|array $data Data array * @return Null|self Returns an instance of TokenUsageDetails or Null */ public static function fromArray(?array $data): ?self { if (empty($data)) { return Null; } $usages = []; if (isset($data['usages']) && is_array($data['usages'])) { foreach ($data['usages'] as $usage) { if (is_array($usage)) { $tokenUsage = TokenUsage::fromArray($usage); if ($tokenUsage !== Null) { $usages[] = $tokenUsage; } } } } return new self( $data['type'] ?? Null, ! empty($usages) ? $usages : Null ); } /** * Converts the object to an array. */ public function toArray(): array { $usages = []; if (is_array($this->usages)) { foreach ($this->usages as $usage) { if ($usage instanceof TokenUsage) { $usages[] = $usage->toArray(); } } } return [ 'type' => $this->type, 'usages' => $usages, ]; } /** * getType.*/ public function getType(): ?string { return $this->type; } /** * getUseRecordArray. * * @return Null|array ReturnTokenUsageObjectArray or Null*/ public function getUsages(): ?array { return $this->usages; } } 
