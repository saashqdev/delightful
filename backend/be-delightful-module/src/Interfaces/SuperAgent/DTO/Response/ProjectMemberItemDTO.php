<?php declare(strict_types=1); /** * Copyright (c) Be Delightful , Distributed under the MIT software license */ namespace Delightful\BeDelightful\Interfaces\BeAgent\DTO\Response; use App\Infrastructure\Core\AbstractDTO; use Delightful\BeDelightful\Domain\BeAgent\Entity\ValueObject\MemberType; class ProjectMemberItemDTO extends AbstractDTO { /** * @var string MemberID*/ protected string $id = ''; /** * @var string User ID (onlyuserType)*/ protected string $userId = ''; /** * @var string DepartmentID (onlyDepartmentType)*/ protected string $departmentId = ''; /** * @var string MemberName*/ protected string $name = ''; /** * @var string InternationalizationName*/ protected string $i18nName = ''; /** * @var string Organization code*/ protected string $organizationCode = ''; /** * @var string AvatarURL*/ protected string $avatarUrl = ''; /** * @var string MemberType User|Department*/ protected string $type = ''; /** * @var string Role*/ protected string $role = ''; /** * @var string Joinmethod*/ protected string $joinMethod = ''; /** * userinMultipleDepartment time Departmentinformation,  not containingCompletePath.*/ protected array $pathNodes = []; /** * fromuserDataCreateDTO.*/ public static function fromUserData(array $userData): self { $dto = new self(); $dto->setId($userData['id'] ?? $userData['user_id'] ?? ''); $dto->setUserId($userData['user_id'] ?? $userData['id'] ?? ''); $dto->setName($userData['nickname'] ?? $userData['name'] ?? ''); $dto->setI18nName($userData['i18n_name'] ?? ''); $dto->setOrganizationCode($userData['organization_code'] ?? ''); $dto->setAvatarUrl($userData['avatar_url'] ?? ''); $dto->setType('User'); $dto->setPathNodes($userData['path_nodes'] ?? []); $dto->setRole($userData['role'] ?? ''); $dto->setJoinMethod($userData['join_method'] ?? ''); return $dto; } /** * fromDepartmentDataCreateDTO.*/ public static function fromDepartmentData(array $departmentData): self { $dto = new self(); $dto->setId($departmentData['id'] ?? $departmentData['department_id'] ?? ''); $dto->setDepartmentId($departmentData['department_id'] ?? $departmentData['id'] ?? ''); $dto->setName($departmentData['name'] ?? $departmentData['department_name'] ?? ''); $dto->setI18nName($departmentData['i18n_name'] ?? ''); $dto->setOrganizationCode($departmentData['organization_code'] ?? ''); $dto->setAvatarUrl(''); // DepartmentGeneralconstantNo/NoneAvatar $dto->setType('Department'); $dto->setPathNodes($departmentData['path_nodes'] ?? []); $dto->setRole($departmentData['role'] ?? ''); $dto->setJoinMethod($departmentData['join_method'] ?? ''); return $dto; } /** * Convert toArray * OutputKeep underscore naming, To maintainAPICompatibility.*/ public function toArray(): array { $result = [ 'id' => $this->id, 'name' => $this->name, 'i18n_name' => $this->i18nName, 'organization_code' => $this->organizationCode, 'avatar_url' => $this->avatarUrl, 'type' => $this->type, 'path_nodes' => $this->pathNodes, 'role' => $this->role, 'join_method' => $this->joinMethod, ]; // By/According toTypeaddspecificfield if (MemberType::fromString($this->type)->isUser()) { $result['user_id'] = $this->userId; } elseif (MemberType::fromString($this->type)->isDepartment()) { $result['department_id'] = $this->departmentId; } return $result; } // Getters and Setters public function getId(): string { return $this->id; } public function setId(string $id): self { $this->id = $id; return $this; } public function getUserId(): string { return $this->userId; } public function setUserId(string $userId): self { $this->userId = $userId; return $this; } public function getDepartmentId(): string { return $this->departmentId; } public function setDepartmentId(string $departmentId): self { $this->departmentId = $departmentId; return $this; } public function getName(): string { return $this->name; } public function setName(string $name): self { $this->name = $name; return $this; } public function getI18nName(): string { return $this->i18nName; } public function setI18nName(string $i18nName): self { $this->i18nName = $i18nName; return $this; } public function getOrganizationCode(): string { return $this->organizationCode; } public function setOrganizationCode(string $organizationCode): self { $this->organizationCode = $organizationCode; return $this; } public function getAvatarUrl(): string { return $this->avatarUrl; } public function setAvatarUrl(string $avatarUrl): self { $this->avatarUrl = $avatarUrl; return $this; } public function getType(): string { return $this->type; } public function setType(string $type): self { $this->type = $type; return $this; } public function getPathNodes(): array { return $this->pathNodes; } public function setPathNodes(array $pathNodes): void { $this->pathNodes = $pathNodes; } public function getRole(): string { return $this->role; } public function setRole(string $role): void { $this->role = $role; } public function getJoinMethod(): string { return $this->joinMethod; } public function setJoinMethod(string $joinMethod): void { $this->joinMethod = $joinMethod; } } 