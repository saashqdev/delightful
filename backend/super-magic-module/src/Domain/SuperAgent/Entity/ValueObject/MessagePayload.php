<?php declare(strict_types=1); /** * Copyright (c) Be Delightful , Distributed under the software license */ namespace Dtyq\SuperMagic\Domain\SuperAgent\Entity\ValueObject; /** * MessageloadValueObject.*/ class MessagePayload { /** * ConstructFunction. * * @param string $messageId MessageID * @param string $type MessageType * @param string $taskId TaskID * @param string $status Status * @param string $content Content * @param Null|array $steps Step * @param Null|array $tool Tool * @param int $sendTimestamp SendTimetimestamp * @param string $event Event * @param array $attachments Attachmentlist * @param Null|array $projectArchive ProjectArchiveData * @param bool $showInUi whether displayed in UI * @param string $remark Remark * @param int $seqId SequenceID * @param Null|string $correlationId associatedID*/ public function __construct( private string $messageId = '', private string $type = '', private string $taskId = '', private string $status = '', private string $content = '', private ?array $steps = Null, private ?array $tool = Null, private int $sendTimestamp = 0, private string $event = '', private array $attachments = [], private ?array $projectArchive = Null, private bool $showInUi = true, private string $remark = '', private int $seqId = 0, private ?string $correlationId = Null ) { } /** * fromArrayCreateloadObject. * * @param array $data loadDataArray*/ public static function fromArray(array $data): self { return new self( $data['message_id'] ?? '', $data['type'] ?? '', $data['task_id'] ?? '', $data['status'] ?? '', $data['content'] ?? '', $data['steps'] ?? Null, $data['tool'] ?? Null, isset($data['send_timestamp']) ? (int) $data['send_timestamp'] : time(), $data['event'] ?? '', $data['attachments'] ?? [], $data['project_archive'] ?? Null, $data['show_in_ui'] ?? true, $data['remark'] ?? '', $data['seq_id'] ?? 0, $data['correlation_id'] ?? Null, ); } /** * Convert toArray. * * @return array loadDataArray*/ public function toArray(): array { return [ 'message_id' => $this->messageId, 'type' => $this->type, 'task_id' => $this->taskId, 'status' => $this->status, 'content' => $this->content, 'steps' => $this->steps, 'tool' => $this->tool, 'send_timestamp' => $this->sendTimestamp ?: time(), 'event' => $this->event, 'attachments' => $this->attachments, 'project_archive' => $this->projectArchive, 'show_in_ui' => $this->showInUi, 'remark' => $this->remark, 'seq_id' => $this->seqId, 'correlation_id' => $this->correlationId, ]; } // Getters public function getMessageId(): string { return $this->messageId; } public function getType(): string { return $this->type; } public function getTaskId(): string { return $this->taskId; } public function getStatus(): string { return $this->status; } public function getContent(): string { return $this->content; } public function getSteps(): ?array { return $this->steps; } public function getTool(): ?array { return $this->tool; } public function getSendTimestamp(): int { return $this->sendTimestamp; } public function getEvent(): string { return $this->event; } public function getAttachments(): array { return $this->attachments; } /** * getProjectArchiveData.*/ public function getProjectArchive(): ?array { return $this->projectArchive; } public function getShowInUi(): bool { return $this->showInUi; } public function getRemark(): string { return $this->remark; } public function getSeqId(): int { return $this->seqId; } // Withers for immutability public function withMessageId(string $messageId): self { $clone = clone $this; $clone->messageId = $messageId; return $clone; } public function withType(string $type): self { $clone = clone $this; $clone->type = $type; return $clone; } public function withTaskId(string $taskId): self { $clone = clone $this; $clone->taskId = $taskId; return $clone; } public function withStatus(string $status): self { $clone = clone $this; $clone->status = $status; return $clone; } public function withContent(string $content): self { $clone = clone $this; $clone->content = $content; return $clone; } public function withSteps(?array $steps): self { $clone = clone $this; $clone->steps = $steps; return $clone; } public function withTool(?array $tool): self { $clone = clone $this; $clone->tool = $tool; return $clone; } public function withSendTimestamp(int $sendTimestamp): self { $clone = clone $this; $clone->sendTimestamp = $sendTimestamp; return $clone; } public function withEvent(string $event): self { $clone = clone $this; $clone->event = $event; return $clone; } public function withAttachments(array $attachments): self { $clone = clone $this; $clone->attachments = $attachments; return $clone; } /** * setProjectArchiveData.*/ public function withProjectArchive(?array $projectArchive): self { $clone = clone $this; $clone->projectArchive = $projectArchive; return $clone; } public function withShowInUi(bool $showInUi): self { $clone = clone $this; $clone->showInUi = $showInUi; return $clone; } public function withRemark(string $remark): self { $clone = clone $this; $clone->remark = $remark; return $clone; } public function withSeqId(int $seqId): self { $clone = clone $this; $clone->seqId = $seqId; return $clone; } public function getCorrelationId(): ?string { return $this->correlationId; } public function setCorrelationId(?string $correlationId): void { $this->correlationId = $correlationId; } } 