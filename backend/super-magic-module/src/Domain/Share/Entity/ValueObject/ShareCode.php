<?php declare(strict_types=1); /** * Copyright (c) Be Delightful , Distributed under the MIT software license */ namespace Dtyq\SuperMagic\Domain\Share\Entity\ValueObject; use InvalidArgumentException; /** * share codeValueObject * TableshowAUniqueshareidentifiersymbol.*/ class ShareCode { /** * share codeMinimumLength.*/ private const int MIN_LENGTH = 6; /** * share codeMaximumLength.*/ private const int MAX_LENGTH = 16; /** * share codeValue*/ private string $value; /** * ConstructFunction. * * @param string $value share codeValue * @throws InvalidArgumentException whenshare code not LegalThrow whenAbnormal*/ public function __construct(string $value) { $this->validate($value); $this->value = $value; } /** * Convert toString.*/ public function __toString(): string { return $this->value; } /** * Create new share codeInstance. * * @param string $value share codeValue*/ public static function create(string $value): self { return new self($value); } /** * getshare codeValue*/ public function getValue(): string { return $this->value; } /** * JudgewhetherwaitinAnothershare code * * @param ShareCode $other Anothershare code*/ public function equals(ShareCode $other): bool { return $this->value === $other->value; } /** * Validateshare code * * @param string $value share codeValue * @throws InvalidArgumentException whenshare code not LegalThrow whenAbnormal*/ private function validate(string $value): void { // CheckLength $length = mb_strlen($value); if ($length < self::MIN_LENGTH || $length > self::MAX_LENGTH) { throw new InvalidArgumentException( sprintf('shareCodeLengthMustin%d to %dcharactersBetween', self::MIN_LENGTH, self::MAX_LENGTH) ); } // Checkformat ( only Allowletter、Number andPartspecialCharacter) if (! preg_match('/^[a-zA-Z0-9_-]+$/', $value)) { throw new InvalidArgumentException('shareCodeCan onlycontainingletter、Number、UnderscoreAndconnectCharacter'); } } } 