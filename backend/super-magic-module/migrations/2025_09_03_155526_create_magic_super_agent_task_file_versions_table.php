<?php declare(strict_types=1); /** * Copyright (c) Be Delightful , Distributed under the software license */ use Hyperf\Database\Migrations\Migration; use Hyperf\Database\Schema\Blueprint; use Hyperf\Database\Schema\Schema; return new class extends Migration { /** * Run the migrations. */ public function up(): void { Schema::create('magic_super_agent_task_file_versions', function (Blueprint $table) { // Primary key $table->bigIncrements('id'); // FileID, related toconnectmagic_super_agent_task_filestable $table->unsignedBigInteger('file_id')->comment('file ID'); // Organization code, forDataIsolation $table->string('organization_code', 64)->comment('organization encoding'); // FileKey, identifierFile'sSpecific version location $table->string('file_key', 512)->comment('Filekey'); // Version number  $table->unsignedInteger('version')->comment('version number'); // EditType: 1=manual editing, 2=AIEdit $table->unsignedTinyInteger('edit_type')->default(1)->comment('Edittype: 1=manual editing, 2=AIEdit'); // indexDesign $table->index(['file_id', 'organization_code'], 'idx_file_id_org_code'); $table->index(['file_key'], 'idx_file_key'); $table->index(['organization_code'], 'idx_organization_code'); $table->index(['file_id', 'version'], 'idx_file_id_version'); $table->index(['edit_type'], 'idx_edit_type'); // whenintervalfield $table->timestamps(); $table->softDeletes(); }); } /** * Reverse the migrations. */ public function down(): void { Schema::dropIfExists('magic_super_agent_task_file_versions'); } }; 