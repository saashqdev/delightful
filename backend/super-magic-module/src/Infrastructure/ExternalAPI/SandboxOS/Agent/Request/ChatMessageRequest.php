<?php declare(strict_types=1); /** * Copyright (c) Be Delightful , Distributed under the MIT software license */ namespace Dtyq\SuperMagic\Infrastructure\ExternalAPI\SandboxOS\Agent\Request; use App\Infrastructure\Util\IdGenerator\IdGenerator; /** * ChatMessageRequestClass * StrictAccording toSandboxGeneral message DocumentChatMessageRequestformat.*/ class ChatMessageRequest { public function __construct( private string $messageId = '', private string $userId = '', private string $taskId = '', private string $prompt = '', private string $taskMode = 'chat', private string $agentMode = '', private array $attachments = [], private array $mentions = [], private array $mcpConfig = [], private string $modelId = '', private array $dynamicConfig = [], ) { } /** * Create achatsMessageRequestObject*/ public static function create( string $messageId, string $userId, string $taskId, string $prompt, string $taskMode = 'chat', string $agentMode = '', array $attachments = [], array $mentions = [], array $mcpConfig = [], string $modelId = '', array $dynamicConfig = [], ): self { return new self( $messageId, $userId, $taskId, $prompt, $taskMode, $agentMode, $attachments, $mentions, $mcpConfig, $modelId, $dynamicConfig ); } public function getMcpConfig(): array { return $this->mcpConfig; } public function setMcpConfig(array $mcpConfig): void { $this->mcpConfig = $mcpConfig; } /** * getTipContent.*/ public function getPrompt(): string { return $this->prompt; } /** * setTipContent.*/ public function setPrompt(string $prompt): self { $this->prompt = $prompt; return $this; } /** * getTaskMode.*/ public function getTaskMode(): string { return $this->taskMode; } /** * setTaskMode.*/ public function setTaskMode(string $taskMode): self { $this->taskMode = $taskMode; return $this; } /** * getAgentMode.*/ public function getAgentMode(): string { return $this->agentMode; } /** * setAgentMode.*/ public function setAgentMode(string $agentMode): self { $this->agentMode = $agentMode; return $this; } /** * getAttachment.*/ public function getAttachments(): array { return $this->attachments; } /** * setAttachment.*/ public function setAttachments(array $attachments): self { $this->attachments = $attachments; return $this; } /** * setUser ID. */ public function setUserId(string $userId): self { $this->userId = $userId; return $this; } /** * getUser ID. */ public function getUserId(): string { return $this->userId; } /** * setTaskID.*/ public function setTaskId(string $taskId): self { $this->taskId = $taskId; return $this; } /** * getTaskID.*/ public function getTaskId(): string { return $this->taskId; } /** * setMessageID.*/ public function setMessageId(string $messageId): self { $this->messageId = $messageId; return $this; } /** * getMessageID.*/ public function getMessageId(): string { return $this->messageId; } /** * getMention.*/ public function getMentions(): array { /* @phpstan-ignore-next-line */ return $this->mentions ?? []; } /** * setMention.*/ public function setMentions(array $mentions): self { $this->mentions = $mentions; return $this; } /** * getModelID.*/ public function getModelId(): string { return $this->modelId; } /** * setModelID.*/ public function setModelId(string $modelId): self { $this->modelId = $modelId; return $this; } /** * getDynamicconfiguration.*/ public function getDynamicConfig(): array { return $this->dynamicConfig; } /** * setDynamicconfiguration.*/ public function setDynamicConfig(array $dynamicConfig): self { $this->dynamicConfig = $dynamicConfig; return $this; } /** * Convert toAPIRequestArray * By/According toSandboxGeneral message DocumentChatMessageRequestformat.*/ public function toArray(): array { return [ 'message_id' => ! empty($this->messageId) ? $this->messageId : (string) IdGenerator::getSnowId(), 'user_id' => $this->userId, 'task_id' => $this->taskId, 'type' => 'chat', 'prompt' => $this->prompt, 'task_mode' => $this->taskMode, 'agent_mode' => $this->agentMode, 'attachments' => $this->attachments, 'mentions' => $this->mentions, 'mcp_config' => $this->mcpConfig, 'model_id' => $this->modelId, 'dynamic_config' => $this->dynamicConfig, ]; } } 